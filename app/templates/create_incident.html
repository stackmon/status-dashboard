{% extends "base.html" %}

{% block content %}
<div class="container">

    <form action="" method="POST" novalidate>
    {{ form.hidden_tag() }}

    <div class="mb-3">
      <label for="{{form.incident_text.id}}" class="form-label">{{form.incident_text.label}}</label>
      <textarea class="form-control {{ ' is-invalid' if form.incident_text.errors
                        | length > 0 else '' }}" 
             id="{{form.incident_text.id}}"
             name="{{form.incident_text.name}}"
             rows=3
             aria-describedby="incidentTextHelp"></textarea>
       <div id="incidentTextHelp" class="form-text">Please enter Incident
         summary here.</div>
       <div class="invalid-feedback">{{ form.incident_text.errors | join(', ')
         }}
       </div>
    </div>

    <div class="mb-3">
      <label for="{{form.incident_impact.id}}"
        class="form-label">{{form.incident_impact.label}}</label>
      <select 
          class="form-select form-select-sm mb-3 {{ ' is-invalid' if
                 form.incident_impact.errors
                        | length > 0 else '' }}"
          aria-label=".form-select-sm" 
          id="{{form.incident_impact.id}}" 
          name="{{form.incident_impact.name}}">
        <option selected>Choose...</option>
        {% for (k, v) in form.incident_impact.choices %}
        <option value="{{k}}">{{v}}</option>
        {% endfor %}
      </select>
      <div id="incidentImpactHelp" class="form-text">Please enter incident impact
        here.</div>
      <div class="invalid-feedback">{{form.incident_impact.errors | join(', ')
        }}</div>
    </div>

    <div class="mb-3">
      <label for="{{form.incident_regions.id}}"
        class="form-label">{{form.incident_regions.label}}</label>
      <select 
          class="form-select form-select-sm mb-3 {{ ' is-invalid' if
                 form.incident_regions.errors
                        | length > 0 else '' }}"
          multiple
          aria-label="multiple .form-select-sm" 
          id="{{form.incident_regions.id}}" 
          name="{{form.incident_regions.name}}">
        <option selected>Choose...</option>
        {% for (k, v) in form.incident_regions.choices %}
        <option value="{{k}}">{{v}}</option>
        {% endfor %}
      </select>
      <div id="incidentRegionsHelp" class="form-text">Please enter affected regions here.</div>
      <div class="invalid-feedback">{{form.incident_regions.errors | join(', ')
        }}</div>
    </div>

    <div class="mb-3">
      <label for="{{form.incident_services.id}}"
        class="form-label">{{form.incident_services.label}}</label>
      <select 
          class="form-select form-select-sm mb-3 {{ ' is-invalid' if
                 form.incident_services.errors
                        | length > 0 else '' }}"
          aria-label="multiple .form-select-sm" 
          multiple
          size="10"
          id="{{form.incident_services.id}}" 
          name="{{form.incident_services.name}}">
        <option selected>Choose...</option>
        {% for (k, v) in form.incident_services.choices %}
        <option value="{{k}}">{{v}}</option>
        {% endfor %}
      </select>
      <div id="incidentServicesHelp" class="form-text">Please enter services
        affected.</div>
      <div class="invalid-feedback">{{form.incident_services.errors | join(', ')
        }}</div>
    </div>

    <div class=mb-3">
      <label for="{{form.incident_start.id}}" class="form-label">{{form.incident_start.label}}</label>
      <input class="form-control {{ ' is-invalid' if
                 form.incident_start.errors
                        | length > 0 else '' }}" type="datetime"
             id="{{form.incident_start.id}}"
             name="{{form.incident_start.name}}"
             aria-describedby="incidentStartHelp"
             placeholder="2023-01-01 12:34:56"/>
       <div id="nextUpdateHelp" class="form-text">Incident Start time (%Y-%m-%d %H:%M:%S).</div>
      <div class="invalid-feedback">{{form.incident_start.errors | join(', ')
        }}</div>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
    </form>

</div>
{% endblock %}
