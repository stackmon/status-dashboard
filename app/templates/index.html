{% extends "base.html" %}
{% block content %}
<div class="table_wrapper">
  <table class="scroll_table">
    <caption>
      Services availabilities
    </caption>
    <thead>
      <tr>
        <th>Category</th>
        <th>Component ID</th>
        <th>Component Name</th>
        {% for region in regions %}
        <th>{{ region }}</th>
        {% endfor %}
      </tr>
    </thead>
    <div>
    {% for category in categories %}
      <tbody class="scroll_table_area">
        <tr>
          <th rowspan="{{ components_by_cats[category]|length }}">
            {{ categories[category] }}
          </th>
          <td class="component_id_cell">{{ components_by_cats[category][0] }}</td>
          <td class="component_name_cell">
            {% for component in all_components %}
              {% if component.id == components_by_cats[category][0] %}
                {{ component.name }}
              {% endif %}
            {% endfor %}
          </td>
          {% for region in regions %}
          <td class="component_status_cell">
            {% for component in all_components %}
              {% if (component.id == components_by_cats[category][0]) %}
                {% if component.component_by_region(component.id, region) == None %}
                  <i class="bi bi-cloud-minus"></i>
                {% else %}
                  <i class="bi sd-{{ component.get_status(region) }}"></i>
                {% endif %}
              {% endif %}  
            {% endfor %}
          </td>
          {% endfor %}
        </tr>
      {% for component_id in components_by_cats[category][1:] %}  
        <tr>
          <td class="component_id_cell">{{ component_id }}</td>
          <td class="component_name_cell">
            {% for component in all_components %}
              {% if component.id == component_id %}
                {{ component.name }}
              {% endif %}  
            {% endfor %}
          </td>
          {% for region in regions %}
          <td class="component_status_cell">
            {% for component in all_components %}
              {% if component.id == component_id %}
                {% if component.component_by_region(component.id, region) == None %}
                  <i class="bi bi-cloud-minus"></i>
                {% else %}
                  <i class="bi sd-{{ component.get_status(region) }}"></i>
                {% endif %}
              {% endif %}  
            {% endfor %}
          </td>
          {% endfor %}
        </tr>
      {% endfor %}
      </tbody>
    {% endfor %}
  </div>
  </table>
</div>
<div>
  <div class="container mt-4">
    <ul class="list-group list-group-horizontal list-group-flush">
      <li class="list-group-item">
          <i class="bi bi-cloud-minus"></i>Not Exist</li>
      <li class="list-group-item">
          <i class="bi sd-available me-1"></i>Operational</li></li> 
      <li class="list-group-item">
          <i class="bi sd-maintenance me-1"></i>Maintenance</li>
      <li class="list-group-item">
          <i class="bi sd-minor me-1"></i><span>Minor Issue</span></li>
      <li class="list-group-item">
          <i class="bi sd-major me-1"></i><span>Major Issue</span></li>
      <li class="list-group-item">
          <i class="bi sd-outage me-1"></i><span>Outage</span></li>
    </ul>
  </div>
</div>
{% endblock %}
